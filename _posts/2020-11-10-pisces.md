---
layout: post
title: Pisces config loader
categories:
  - Projects
tags:
  - Unity
  - Pisces
  - Yaml
---

## [PiscesConfigLoader 0.9](https://github.com/SolAnna7/PiscesConfigLoader)

A configuration loader and reader tool for Unity

### Features

* Parse YAML files to object structure
* Traverse the data tree
* Immutable structure
* Query simple and complex data types
  * Mathematical expressions
  * Number ranges
  * Lists
  * Sub config trees
* Merge trees


### Usage

##### Build the config tree

* Parsing resource files

```c#
new ConfigBuilder()
    // TestYamlFiles is a Resources folder with YAML files in it
    .ParseTextResourceFiles("TestYamlFiles", new ConfigBuilder.YamlTextConfigParser())
    .Build();

new ConfigBuilder()
    // TestYamlFiles/TestYaml1 Resources YAML file
    .ParseTextResourceFiles("TestYamlFiles/TestYaml1", new ConfigBuilder.YamlTextConfigParser())
    .Build();
```
* Parsing strings

```c#
var configRoot =
    new ConfigBuilder()
        .ParseString(@"
                     aaa:
                       bbb: 123
                       ccc: ddd", new ConfigBuilder.YamlTextConfigParser())
        .Build();
```

* Merge dictionaries

```c#
var configRoot =
    new ConfigBuilder()
        .MergeDictionary(
            new Dictionary<object, object>
            {
                {
                    "aaa", new Dictionary<object, object>
                    {
                        {"bbb", 999},
                    }
                }
            }
        ).Build();
```

* Currently contains only a YAML parser but can be extended

```c#
private class TestConfigParser : ConfigBuilder.ITextConfigParser
{
    public Dictionary<object, object> ParseText(string text)
    {
        if (text == "please!")
            return new Dictionary<object, object>
            {
                {
                    "yesssss", "^_^"
                }
            };

        return new Dictionary<object, object>
        {
            {"nope", "sorry"}
        };
    }
}

...

new ConfigBuilder()
    .ParseString("please!", new TestConfigParser())
    .Build();
```


[Github repository](https://github.com/SolAnna7/PiscesConfigLoader)